#!/bin/bash
# Hi-Lo Number Guessing Game in Bash

# Max number
MAX_NUMBER=${1:-100}

#  Condition MAX_NUMBER is a positive number
if ! [[ "$MAX_NUMBER" =~ ^[0-9]+$ ]] || [ "$MAX_NUMBER" -le 1 ]; then
    echo "Error: Maximum number must be an integer greater than 1."
    exit 1
fi

# Generate random number 
TARGET=$(( RANDOM % MAX_NUMBER + 1 ))

# Attempt counter
attempts=0

echo "Welcome to the Hi-Lo Game!"
echo "I have chosen a number between 1 and $MAX_NUMBER."
echo "Try to guess it!"

while true; do
    read -p "Enter your guess: " guess

    if ! [[ "$guess" =~ ^[0-9]+$ ]]; then
        echo "Invalid input. Please enter a positive integer."
        continue
    fi

    ((attempts++))

    if [ "$guess" -lt "$TARGET" ]; then
        echo "Too low! Try again."
    elif [ "$guess" -gt "$TARGET" ]; then
        echo "Too high! Try again."
    else
        echo "Congratulations! You guessed it in $attempts attempts."
        break
    fi
done

